# BGP-ASPA

ASPA对域间路由泄露攻击的防御能力的研究与仿真，由 https://github.com/ssbgp/simulator 修改而来

域间路由关系详见 [here](https://www.cs.princeton.edu/~jrex/papers/sigmetrics00.long.pdf)

## Tips 1

    注意：本模拟器的链路都是单向的！！！

1. 导出提供者路由：AS在与提供者交换路由信息时，可以导出自己的路由和客户的路由，但不能导出从其他提供者或对等体学习到的路由。也就是说，AS 不为其提供者提供中转服务。

2. 导出客户路由：在与客户交换路由信息时，AS 可以导出其路由，以及从其提供者和对等方学习到的路由。也就是说，AS 确实为其客户提供中转服务。

3. 导出对等体路由：AS 在与对等点交换路由信息时，可以导出自己的路由和客户的路由，但不能导出从其他提供商或对等点学习到的路由。即一个AS不为其对等体提供中转服务

- **C** - 代表源AS（后面那一个）导出客户路由到目的AS（前面那一个），即目的AS是源AS的客户

- **P** - 代表源AS（后面那一个）导出提供者路由到目的AS（前面那一个），即目的AS是源AS的提供者

- **R** - 代表源AS（后面那一个）导出对等体路由到目的AS（前面那一个），即目的AS是源AS的对等体

规则：

1. 提供商能够发送路由给客户，注意，提供商也会将自己邻居对等体的路由信息发送给客户
2. 对等体能够发送路由给对等体，但仅限**邻居AS**之间，不可在对等体之间传递
3. 客户可以发送路由给提供商，但该路由仅能够让提供商知道，即使是提供商的对等体也无法得知

## Tips 2

`.nodes.csv`文件中，本地优先级 **Local Preference** 指的是要到达设定的目标AS需要经过的路由的优先级

- **◦** - 代表目的AS本身

- **•** - 代表无法到达目的AS

- **C** - 代表消息传到目的AS的本地优先级为客户级别（最高）

- **P** - 代表消息传到目的AS的本地优先级为供应商级别（最低）

- **R** - 代表消息传到目的AS的本地优先级为对等体级别（次高）

## Tips 3

测试用的启动项，这能够输出尽可能多的测试文件

````
-t ./topo/topo.topo -d 2 -c 1 -rn -tr -meta -o ./output
````

## Tips 4

**如何实现BGP泄露与ASPA的部署？**

- **路由泄露** ：应当选定一个或者多个攻击者节点，对于攻击者节点，它在接收路由时，可能可以将来自 peer 和 provider 的本地优先级变为 customer 的（或者反之）

- **ASPA部署** ：应当选定一个或者多个防御者节点，对于防御者节点，它在接收路由时，可以验证AS-Path中的**每一个链路**，确认其中链路是否合法，如不合法（如存在peer to provider），则拒绝这条路由

- **评价参数** ：保护成功的ASPA节点等